{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GoogleButton = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.default = withGoogle;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _auth = require('@aws-amplify/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _AmplifyTheme = require('../../AmplifyTheme');\n\nvar _AmplifyTheme2 = _interopRequireDefault(_AmplifyTheme);\n\nvar _AmplifyUI = require('../../AmplifyUI');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar logger = new _core.ConsoleLogger('withGoogle');\n\nfunction withGoogle(Comp) {\n  return function (_Component) {\n    (0, _inherits3.default)(_class, _Component);\n\n    function _class(props) {\n      (0, _classCallCheck3.default)(this, _class);\n\n      var _this = (0, _possibleConstructorReturn3.default)(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n      _this.initGapi = _this.initGapi.bind(_this);\n      _this.signIn = _this.signIn.bind(_this);\n      _this.federatedSignIn = _this.federatedSignIn.bind(_this);\n      _this.state = {};\n      return _this;\n    }\n\n    (0, _createClass3.default)(_class, [{\n      key: 'signIn',\n      value: function signIn() {\n        var _this2 = this;\n\n        var ga = window.gapi.auth2.getAuthInstance();\n        var onError = this.props.onError;\n        ga.signIn().then(function (googleUser) {\n          return _this2.federatedSignIn(googleUser);\n        }, function (error) {\n          if (onError) onError(error);else throw error;\n        });\n      }\n    }, {\n      key: 'federatedSignIn',\n      value: function () {\n        var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(googleUser) {\n          var _googleUser$getAuthRe, id_token, expires_at, profile, user, onStateChange;\n\n          return _regenerator2.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _googleUser$getAuthRe = googleUser.getAuthResponse(), id_token = _googleUser$getAuthRe.id_token, expires_at = _googleUser$getAuthRe.expires_at;\n                  profile = googleUser.getBasicProfile();\n                  user = {\n                    email: profile.getEmail(),\n                    name: profile.getName()\n                  };\n                  onStateChange = this.props.onStateChange;\n\n                  if (!(!_auth2.default || typeof _auth2.default.federatedSignIn !== 'function' || typeof _auth2.default.currentAuthenticatedUser !== 'function')) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n\n                case 6:\n                  _context.next = 8;\n                  return _auth2.default.federatedSignIn('google', {\n                    token: id_token,\n                    expires_at: expires_at\n                  }, user);\n\n                case 8:\n                  _context.next = 10;\n                  return _auth2.default.currentAuthenticatedUser();\n\n                case 10:\n                  user = _context.sent;\n\n                  if (onStateChange) {\n                    onStateChange('signedIn', user);\n                  }\n\n                case 12:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function federatedSignIn(_x) {\n          return _ref.apply(this, arguments);\n        }\n\n        return federatedSignIn;\n      }()\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        var google_client_id = this.props.google_client_id;\n        if (google_client_id) this.createScript();\n      }\n    }, {\n      key: 'createScript',\n      value: function createScript() {\n        var script = document.createElement('script');\n        script.src = 'https://apis.google.com/js/platform.js';\n        script.async = true;\n        script.onload = this.initGapi;\n        document.body.appendChild(script);\n      }\n    }, {\n      key: 'initGapi',\n      value: function initGapi() {\n        logger.debug('init gapi');\n        var that = this;\n        var google_client_id = this.props.google_client_id;\n        var g = window.gapi;\n        g.load('auth2', function () {\n          g.auth2.init({\n            client_id: google_client_id,\n            scope: 'profile email openid'\n          });\n        });\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var ga = window.gapi && window.gapi.auth2 ? window.gapi.auth2.getAuthInstance() : null;\n        return _react2.default.createElement(Comp, (0, _extends3.default)({}, this.props, {\n          ga: ga,\n          googleSignIn: this.signIn\n        }));\n      }\n    }]);\n    return _class;\n  }(_react.Component);\n}\n\nvar Button = function Button(props) {\n  return _react2.default.createElement(_AmplifyUI.SignInButton, {\n    id: 'google_signin_btn',\n    onClick: props.googleSignIn,\n    theme: props.theme || _AmplifyTheme2.default\n  }, 'Sign In with Google');\n};\n\nvar GoogleButton = exports.GoogleButton = withGoogle(Button);","map":{"version":3,"sources":["/home/ec2-user/environment/amazon-cognito-identity-management-workshop/website/node_modules/aws-amplify-react/dist/Auth/Provider/withGoogle.js"],"names":["Object","defineProperty","exports","value","GoogleButton","undefined","_extends2","require","_extends3","_interopRequireDefault","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","default","withGoogle","_react","_react2","_core","_auth","_auth2","_AmplifyTheme","_AmplifyTheme2","_AmplifyUI","obj","__esModule","logger","ConsoleLogger","Comp","_Component","_class","props","_this","__proto__","getPrototypeOf","call","initGapi","bind","signIn","federatedSignIn","state","key","_this2","ga","window","gapi","auth2","getAuthInstance","onError","then","googleUser","error","_ref","mark","_callee","_googleUser$getAuthRe","id_token","expires_at","profile","user","onStateChange","wrap","_callee$","_context","prev","next","getAuthResponse","getBasicProfile","email","getEmail","name","getName","currentAuthenticatedUser","Error","token","sent","stop","_x","apply","arguments","componentDidMount","google_client_id","createScript","script","document","createElement","src","async","onload","body","appendChild","debug","that","g","load","init","client_id","scope","render","googleSignIn","Component","Button","SignInButton","id","onClick","theme"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.GoogleButton = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.default = withGoogle;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _auth = require('@aws-amplify/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _AmplifyTheme = require('../../AmplifyTheme');\n\nvar _AmplifyTheme2 = _interopRequireDefault(_AmplifyTheme);\n\nvar _AmplifyUI = require('../../AmplifyUI');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar logger = new _core.ConsoleLogger('withGoogle');\n\nfunction withGoogle(Comp) {\n    return function (_Component) {\n        (0, _inherits3.default)(_class, _Component);\n\n        function _class(props) {\n            (0, _classCallCheck3.default)(this, _class);\n\n            var _this = (0, _possibleConstructorReturn3.default)(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n            _this.initGapi = _this.initGapi.bind(_this);\n            _this.signIn = _this.signIn.bind(_this);\n            _this.federatedSignIn = _this.federatedSignIn.bind(_this);\n\n            _this.state = {};\n            return _this;\n        }\n\n        (0, _createClass3.default)(_class, [{\n            key: 'signIn',\n            value: function signIn() {\n                var _this2 = this;\n\n                var ga = window.gapi.auth2.getAuthInstance();\n                var onError = this.props.onError;\n\n                ga.signIn().then(function (googleUser) {\n                    return _this2.federatedSignIn(googleUser);\n                }, function (error) {\n                    if (onError) onError(error);else throw error;\n                });\n            }\n        }, {\n            key: 'federatedSignIn',\n            value: function () {\n                var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(googleUser) {\n                    var _googleUser$getAuthRe, id_token, expires_at, profile, user, onStateChange;\n\n                    return _regenerator2.default.wrap(function _callee$(_context) {\n                        while (1) {\n                            switch (_context.prev = _context.next) {\n                                case 0:\n                                    _googleUser$getAuthRe = googleUser.getAuthResponse(), id_token = _googleUser$getAuthRe.id_token, expires_at = _googleUser$getAuthRe.expires_at;\n                                    profile = googleUser.getBasicProfile();\n                                    user = {\n                                        email: profile.getEmail(),\n                                        name: profile.getName()\n                                    };\n                                    onStateChange = this.props.onStateChange;\n\n                                    if (!(!_auth2.default || typeof _auth2.default.federatedSignIn !== 'function' || typeof _auth2.default.currentAuthenticatedUser !== 'function')) {\n                                        _context.next = 6;\n                                        break;\n                                    }\n\n                                    throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n\n                                case 6:\n                                    _context.next = 8;\n                                    return _auth2.default.federatedSignIn('google', { token: id_token, expires_at: expires_at }, user);\n\n                                case 8:\n                                    _context.next = 10;\n                                    return _auth2.default.currentAuthenticatedUser();\n\n                                case 10:\n                                    user = _context.sent;\n\n\n                                    if (onStateChange) {\n                                        onStateChange('signedIn', user);\n                                    }\n\n                                case 12:\n                                case 'end':\n                                    return _context.stop();\n                            }\n                        }\n                    }, _callee, this);\n                }));\n\n                function federatedSignIn(_x) {\n                    return _ref.apply(this, arguments);\n                }\n\n                return federatedSignIn;\n            }()\n        }, {\n            key: 'componentDidMount',\n            value: function componentDidMount() {\n                var google_client_id = this.props.google_client_id;\n\n                if (google_client_id) this.createScript();\n            }\n        }, {\n            key: 'createScript',\n            value: function createScript() {\n                var script = document.createElement('script');\n                script.src = 'https://apis.google.com/js/platform.js';\n                script.async = true;\n                script.onload = this.initGapi;\n                document.body.appendChild(script);\n            }\n        }, {\n            key: 'initGapi',\n            value: function initGapi() {\n                logger.debug('init gapi');\n\n                var that = this;\n                var google_client_id = this.props.google_client_id;\n\n                var g = window.gapi;\n                g.load('auth2', function () {\n                    g.auth2.init({\n                        client_id: google_client_id,\n                        scope: 'profile email openid'\n                    });\n                });\n            }\n        }, {\n            key: 'render',\n            value: function render() {\n                var ga = window.gapi && window.gapi.auth2 ? window.gapi.auth2.getAuthInstance() : null;\n                return _react2.default.createElement(Comp, (0, _extends3.default)({}, this.props, { ga: ga, googleSignIn: this.signIn }));\n            }\n        }]);\n        return _class;\n    }(_react.Component);\n}\n\nvar Button = function Button(props) {\n    return _react2.default.createElement(\n        _AmplifyUI.SignInButton,\n        {\n            id: 'google_signin_btn',\n            onClick: props.googleSignIn,\n            theme: props.theme || _AmplifyTheme2.default\n        },\n        'Sign In with Google'\n    );\n};\n\nvar GoogleButton = exports.GoogleButton = withGoogle(Button);"]},"metadata":{},"sourceType":"script"}