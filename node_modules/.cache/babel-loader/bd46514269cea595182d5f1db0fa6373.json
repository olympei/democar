{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChatBot = undefined;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _toConsumableArray2 = require(\"babel-runtime/helpers/toConsumableArray\");\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _asyncToGenerator2 = require(\"babel-runtime/helpers/asyncToGenerator\");\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _AmplifyUI = require(\"../AmplifyUI\");\n\nvar _AmplifyTheme = require(\"../AmplifyTheme\");\n\nvar _core = require(\"@aws-amplify/core\");\n\nvar _interactions = require(\"@aws-amplify/interactions\");\n\nvar _interactions2 = _interopRequireDefault(_interactions);\n\nvar _runtime = require(\"regenerator-runtime/runtime\");\n\nvar _runtime2 = _interopRequireDefault(_runtime);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar styles = {\n  itemMe: {\n    padding: 10,\n    fontSize: 12,\n    color: 'gray',\n    marginTop: 4,\n    textAlign: 'right'\n  },\n  itemBot: {\n    fontSize: 12,\n    textAlign: 'left'\n  },\n  list: {\n    height: '300px',\n    overflow: 'auto'\n  },\n  textInput: Object.assign({}, _AmplifyTheme.Input, {\n    display: 'inline-block',\n    width: 'calc(100% - 90px - 15px)'\n  }),\n  button: Object.assign({}, _AmplifyTheme.Button, {\n    width: '90px',\n    float: 'right'\n  })\n};\n\nvar ChatBot = exports.ChatBot = function (_Component) {\n  (0, _inherits3.default)(ChatBot, _Component);\n\n  function ChatBot(props) {\n    (0, _classCallCheck3.default)(this, ChatBot);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (ChatBot.__proto__ || Object.getPrototypeOf(ChatBot)).call(this, props));\n\n    _this.state = {\n      dialog: [{\n        message: _this.props.welcomeMessage || 'Welcome to Lex',\n        from: 'system'\n      }],\n      inputText: ''\n    };\n    _this.changeInputText = _this.changeInputText.bind(_this);\n    _this.listItems = _this.listItems.bind(_this);\n    _this.submit = _this.submit.bind(_this);\n    _this.listItemsRef = _react2.default.createRef();\n    return _this;\n  }\n\n  (0, _createClass3.default)(ChatBot, [{\n    key: \"listItems\",\n    value: function listItems() {\n      return this.state.dialog.map(function (m, i) {\n        if (m.from === 'me') {\n          return _react2.default.createElement(\"div\", {\n            key: i,\n            style: styles.itemMe\n          }, m.message);\n        } else if (m.from === 'system') {\n          return _react2.default.createElement(\"div\", {\n            key: i,\n            style: styles.itemBot\n          }, m.message);\n        } else {\n          return _react2.default.createElement(\"div\", {\n            key: i,\n            style: styles.itemBot\n          }, m.message);\n        }\n      });\n    }\n  }, {\n    key: \"submit\",\n    value: function () {\n      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(e) {\n        var _this2 = this;\n\n        var response;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (this.state.inputText) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                _context.next = 5;\n                return new Promise(function (resolve) {\n                  return _this2.setState({\n                    dialog: [].concat((0, _toConsumableArray3.default)(_this2.state.dialog), [{\n                      message: _this2.state.inputText,\n                      from: 'me'\n                    }])\n                  }, resolve);\n                });\n\n              case 5:\n                if (!(!_interactions2.default || typeof _interactions2.default.send !== 'function')) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new Error('No Interactions module found, please ensure @aws-amplify/interactions is imported');\n\n              case 7:\n                _context.next = 9;\n                return _interactions2.default.send(this.props.botName, this.state.inputText);\n\n              case 9:\n                response = _context.sent;\n                _context.next = 12;\n                return this.setState({\n                  dialog: [].concat((0, _toConsumableArray3.default)(this.state.dialog), [response && {\n                    from: 'bot',\n                    message: response.message\n                  }]),\n                  inputText: ''\n                });\n\n              case 12:\n                this.listItemsRef.current.scrollTop = this.listItemsRef.current.scrollHeight;\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submit(_x) {\n        return _ref.apply(this, arguments);\n      }\n\n      return submit;\n    }()\n  }, {\n    key: \"changeInputText\",\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(event) {\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.setState({\n                  inputText: event.target.value\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function changeInputText(_x2) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return changeInputText;\n    }()\n  }, {\n    key: \"getOnComplete\",\n    value: function getOnComplete(fn) {\n      var _this3 = this;\n\n      return function () {\n        var clearOnComplete = _this3.props.clearOnComplete;\n        var message = fn.apply(undefined, arguments);\n\n        _this3.setState({\n          dialog: [].concat((0, _toConsumableArray3.default)(!clearOnComplete && _this3.state.dialog), [message && {\n            from: 'bot',\n            message: message\n          }]).filter(Boolean)\n        }, function () {\n          _this3.listItemsRef.current.scrollTop = _this3.listItemsRef.current.scrollHeight;\n        });\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          onComplete = _props.onComplete,\n          botName = _props.botName;\n\n      if (onComplete && botName) {\n        if (!_interactions2.default || typeof _interactions2.default.onComplete !== 'function') {\n          throw new Error('No Interactions module found, please ensure @aws-amplify/interactions is imported');\n        }\n\n        _interactions2.default.onComplete(botName, this.getOnComplete(onComplete, this));\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          onComplete = _props2.onComplete,\n          botName = _props2.botName;\n\n      if (botName && this.props.onComplete !== prevProps.onComplete) {\n        if (!_interactions2.default || typeof _interactions2.default.onComplete !== 'function') {\n          throw new Error('No Interactions module found, please ensure @aws-amplify/interactions is imported');\n        }\n\n        _interactions2.default.onComplete(botName, this.getOnComplete(onComplete, this));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props3 = this.props,\n          title = _props3.title,\n          theme = _props3.theme,\n          onComplete = _props3.onComplete;\n      return _react2.default.createElement(_AmplifyUI.FormSection, {\n        theme: theme\n      }, title && _react2.default.createElement(_AmplifyUI.SectionHeader, {\n        theme: theme\n      }, _core.I18n.get(title)), _react2.default.createElement(_AmplifyUI.SectionBody, {\n        theme: theme\n      }, _react2.default.createElement(\"div\", {\n        ref: this.listItemsRef,\n        style: styles.list\n      }, this.listItems())), _react2.default.createElement(_AmplifyUI.SectionFooter, {\n        theme: theme\n      }, _react2.default.createElement(\"form\", {\n        onSubmit: this.submit\n      }, _react2.default.createElement(\"input\", {\n        style: styles.textInput,\n        type: \"text\",\n        placeholder: _core.I18n.get(\"Type your message here\"),\n        onChange: this.changeInputText,\n        value: this.state.inputText\n      }), _react2.default.createElement(\"button\", {\n        type: \"submit\",\n        style: styles.button\n      }, _core.I18n.get('Send')))));\n    }\n  }]);\n  return ChatBot;\n}(_react.Component);\n\nChatBot.defaultProps = {\n  title: '',\n  botName: '',\n  onComplete: undefined,\n  clearOnComplete: false\n};\nexports.default = ChatBot;","map":{"version":3,"sources":["/home/ec2-user/environment/amazon-cognito-identity-management-workshop/website/node_modules/aws-amplify-react/dist/Interactions/ChatBot.js"],"names":["Object","defineProperty","exports","value","ChatBot","undefined","_regenerator","require","_regenerator2","_interopRequireDefault","_toConsumableArray2","_toConsumableArray3","_asyncToGenerator2","_asyncToGenerator3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_AmplifyUI","_AmplifyTheme","_core","_interactions","_interactions2","_runtime","_runtime2","obj","__esModule","default","styles","itemMe","padding","fontSize","color","marginTop","textAlign","itemBot","list","height","overflow","textInput","assign","Input","display","width","button","Button","float","_Component","props","_this","__proto__","getPrototypeOf","call","state","dialog","message","welcomeMessage","from","inputText","changeInputText","bind","listItems","submit","listItemsRef","createRef","key","map","m","i","createElement","style","_ref","mark","_callee","e","_this2","response","wrap","_callee$","_context","prev","next","preventDefault","abrupt","Promise","resolve","setState","concat","send","Error","botName","sent","current","scrollTop","scrollHeight","stop","_x","apply","arguments","_ref2","_callee2","event","_callee2$","_context2","target","_x2","getOnComplete","fn","_this3","clearOnComplete","filter","Boolean","componentDidMount","_props","onComplete","componentDidUpdate","prevProps","_props2","render","_props3","title","theme","FormSection","SectionHeader","I18n","get","SectionBody","ref","SectionFooter","onSubmit","type","placeholder","onChange","Component","defaultProps"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ChatBot = undefined;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _toConsumableArray2 = require(\"babel-runtime/helpers/toConsumableArray\");\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _asyncToGenerator2 = require(\"babel-runtime/helpers/asyncToGenerator\");\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _AmplifyUI = require(\"../AmplifyUI\");\n\nvar _AmplifyTheme = require(\"../AmplifyTheme\");\n\nvar _core = require(\"@aws-amplify/core\");\n\nvar _interactions = require(\"@aws-amplify/interactions\");\n\nvar _interactions2 = _interopRequireDefault(_interactions);\n\nvar _runtime = require(\"regenerator-runtime/runtime\");\n\nvar _runtime2 = _interopRequireDefault(_runtime);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar styles = {\n    itemMe: {\n        padding: 10,\n        fontSize: 12,\n        color: 'gray',\n        marginTop: 4,\n        textAlign: 'right'\n    },\n    itemBot: {\n        fontSize: 12,\n        textAlign: 'left'\n    },\n    list: {\n        height: '300px',\n        overflow: 'auto'\n    },\n    textInput: Object.assign({}, _AmplifyTheme.Input, {\n        display: 'inline-block',\n        width: 'calc(100% - 90px - 15px)'\n    }),\n    button: Object.assign({}, _AmplifyTheme.Button, {\n        width: '90px',\n        float: 'right'\n    })\n};\n\nvar ChatBot = exports.ChatBot = function (_Component) {\n    (0, _inherits3.default)(ChatBot, _Component);\n\n    function ChatBot(props) {\n        (0, _classCallCheck3.default)(this, ChatBot);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ChatBot.__proto__ || Object.getPrototypeOf(ChatBot)).call(this, props));\n\n        _this.state = {\n            dialog: [{\n                message: _this.props.welcomeMessage || 'Welcome to Lex',\n                from: 'system'\n            }],\n            inputText: ''\n        };\n        _this.changeInputText = _this.changeInputText.bind(_this);\n        _this.listItems = _this.listItems.bind(_this);\n        _this.submit = _this.submit.bind(_this);\n\n        _this.listItemsRef = _react2.default.createRef();\n        return _this;\n    }\n\n    (0, _createClass3.default)(ChatBot, [{\n        key: \"listItems\",\n        value: function listItems() {\n            return this.state.dialog.map(function (m, i) {\n                if (m.from === 'me') {\n                    return _react2.default.createElement(\n                        \"div\",\n                        { key: i, style: styles.itemMe },\n                        m.message\n                    );\n                } else if (m.from === 'system') {\n                    return _react2.default.createElement(\n                        \"div\",\n                        { key: i, style: styles.itemBot },\n                        m.message\n                    );\n                } else {\n                    return _react2.default.createElement(\n                        \"div\",\n                        { key: i, style: styles.itemBot },\n                        m.message\n                    );\n                }\n            });\n        }\n    }, {\n        key: \"submit\",\n        value: function () {\n            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(e) {\n                var _this2 = this;\n\n                var response;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                e.preventDefault();\n\n                                if (this.state.inputText) {\n                                    _context.next = 3;\n                                    break;\n                                }\n\n                                return _context.abrupt(\"return\");\n\n                            case 3:\n                                _context.next = 5;\n                                return new Promise(function (resolve) {\n                                    return _this2.setState({\n                                        dialog: [].concat((0, _toConsumableArray3.default)(_this2.state.dialog), [{ message: _this2.state.inputText, from: 'me' }])\n                                    }, resolve);\n                                });\n\n                            case 5:\n                                if (!(!_interactions2.default || typeof _interactions2.default.send !== 'function')) {\n                                    _context.next = 7;\n                                    break;\n                                }\n\n                                throw new Error('No Interactions module found, please ensure @aws-amplify/interactions is imported');\n\n                            case 7:\n                                _context.next = 9;\n                                return _interactions2.default.send(this.props.botName, this.state.inputText);\n\n                            case 9:\n                                response = _context.sent;\n                                _context.next = 12;\n                                return this.setState({\n                                    dialog: [].concat((0, _toConsumableArray3.default)(this.state.dialog), [response && { from: 'bot', message: response.message }]),\n                                    inputText: ''\n                                });\n\n                            case 12:\n                                this.listItemsRef.current.scrollTop = this.listItemsRef.current.scrollHeight;\n\n                            case 13:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n\n            function submit(_x) {\n                return _ref.apply(this, arguments);\n            }\n\n            return submit;\n        }()\n    }, {\n        key: \"changeInputText\",\n        value: function () {\n            var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(event) {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return this.setState({ inputText: event.target.value });\n\n                            case 2:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n\n            function changeInputText(_x2) {\n                return _ref2.apply(this, arguments);\n            }\n\n            return changeInputText;\n        }()\n    }, {\n        key: \"getOnComplete\",\n        value: function getOnComplete(fn) {\n            var _this3 = this;\n\n            return function () {\n                var clearOnComplete = _this3.props.clearOnComplete;\n\n                var message = fn.apply(undefined, arguments);\n\n                _this3.setState({\n                    dialog: [].concat((0, _toConsumableArray3.default)(!clearOnComplete && _this3.state.dialog), [message && { from: 'bot', message: message }]).filter(Boolean)\n                }, function () {\n                    _this3.listItemsRef.current.scrollTop = _this3.listItemsRef.current.scrollHeight;\n                });\n            };\n        }\n    }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            var _props = this.props,\n                onComplete = _props.onComplete,\n                botName = _props.botName;\n\n\n            if (onComplete && botName) {\n                if (!_interactions2.default || typeof _interactions2.default.onComplete !== 'function') {\n                    throw new Error('No Interactions module found, please ensure @aws-amplify/interactions is imported');\n                }\n                _interactions2.default.onComplete(botName, this.getOnComplete(onComplete, this));\n            }\n        }\n    }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n            var _props2 = this.props,\n                onComplete = _props2.onComplete,\n                botName = _props2.botName;\n\n\n            if (botName && this.props.onComplete !== prevProps.onComplete) {\n                if (!_interactions2.default || typeof _interactions2.default.onComplete !== 'function') {\n                    throw new Error('No Interactions module found, please ensure @aws-amplify/interactions is imported');\n                }\n                _interactions2.default.onComplete(botName, this.getOnComplete(onComplete, this));\n            }\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var _props3 = this.props,\n                title = _props3.title,\n                theme = _props3.theme,\n                onComplete = _props3.onComplete;\n\n\n            return _react2.default.createElement(\n                _AmplifyUI.FormSection,\n                { theme: theme },\n                title && _react2.default.createElement(\n                    _AmplifyUI.SectionHeader,\n                    { theme: theme },\n                    _core.I18n.get(title)\n                ),\n                _react2.default.createElement(\n                    _AmplifyUI.SectionBody,\n                    { theme: theme },\n                    _react2.default.createElement(\n                        \"div\",\n                        { ref: this.listItemsRef, style: styles.list },\n                        this.listItems()\n                    )\n                ),\n                _react2.default.createElement(\n                    _AmplifyUI.SectionFooter,\n                    { theme: theme },\n                    _react2.default.createElement(\n                        \"form\",\n                        { onSubmit: this.submit },\n                        _react2.default.createElement(\"input\", {\n                            style: styles.textInput,\n                            type: \"text\",\n                            placeholder: _core.I18n.get(\"Type your message here\"),\n                            onChange: this.changeInputText,\n                            value: this.state.inputText }),\n                        _react2.default.createElement(\n                            \"button\",\n                            { type: \"submit\", style: styles.button },\n                            _core.I18n.get('Send')\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return ChatBot;\n}(_react.Component);\n\nChatBot.defaultProps = {\n    title: '',\n    botName: '',\n    onComplete: undefined,\n    clearOnComplete: false\n};\n\nexports.default = ChatBot;"]},"metadata":{},"sourceType":"script"}