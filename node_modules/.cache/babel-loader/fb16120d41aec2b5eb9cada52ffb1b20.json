{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _auth = require('@aws-amplify/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _AuthPiece2 = require('./AuthPiece');\n\nvar _AuthPiece3 = _interopRequireDefault(_AuthPiece2);\n\nvar _AmplifyTheme = require('../AmplifyTheme');\n\nvar _AmplifyTheme2 = _interopRequireDefault(_AmplifyTheme);\n\nvar _AmplifyUI = require('../AmplifyUI');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nvar logger = new _core.ConsoleLogger('VerifyContact');\n\nvar VerifyContact = function (_AuthPiece) {\n  (0, _inherits3.default)(VerifyContact, _AuthPiece);\n\n  function VerifyContact(props) {\n    (0, _classCallCheck3.default)(this, VerifyContact);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (VerifyContact.__proto__ || Object.getPrototypeOf(VerifyContact)).call(this, props));\n\n    _this._validAuthStates = ['verifyContact'];\n    _this.verify = _this.verify.bind(_this);\n    _this.submit = _this.submit.bind(_this);\n    _this.state = {\n      verifyAttr: null\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(VerifyContact, [{\n    key: 'verify',\n    value: function verify() {\n      var _this2 = this;\n\n      var _inputs = this.inputs,\n          contact = _inputs.contact,\n          checkedValue = _inputs.checkedValue;\n\n      if (!contact) {\n        this.error('Neither Email nor Phone Number selected');\n        return;\n      }\n\n      if (!_auth2.default || typeof _auth2.default.verifyCurrentUserAttribute !== 'function') {\n        throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n      }\n\n      _auth2.default.verifyCurrentUserAttribute(checkedValue).then(function (data) {\n        logger.debug(data);\n\n        _this2.setState({\n          verifyAttr: checkedValue\n        });\n      }).catch(function (err) {\n        return _this2.error(err);\n      });\n    }\n  }, {\n    key: 'submit',\n    value: function submit() {\n      var _this3 = this;\n\n      var attr = this.state.verifyAttr;\n      var code = this.inputs.code;\n\n      if (!_auth2.default || typeof _auth2.default.verifyCurrentUserAttributeSubmit !== 'function') {\n        throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n      }\n\n      _auth2.default.verifyCurrentUserAttributeSubmit(attr, code).then(function (data) {\n        logger.debug(data);\n\n        _this3.changeState('signedIn', _this3.props.authData);\n\n        _this3.setState({\n          verifyAttr: null\n        });\n      }).catch(function (err) {\n        return _this3.error(err);\n      });\n    }\n  }, {\n    key: 'verifyView',\n    value: function verifyView() {\n      var user = this.props.authData;\n\n      if (!user) {\n        logger.debug('no user for verify');\n        return null;\n      }\n\n      var unverified = user.unverified;\n\n      if (!unverified) {\n        logger.debug('no unverified on user');\n        return null;\n      }\n\n      var email = unverified.email,\n          phone_number = unverified.phone_number;\n      var theme = this.props.theme || _AmplifyTheme2.default;\n      return _react2.default.createElement('div', null, email ? _react2.default.createElement(_AmplifyUI.RadioRow, {\n        placeholder: _core.I18n.get('Email'),\n        theme: theme,\n        key: 'email',\n        name: 'contact',\n        value: 'email',\n        onChange: this.handleInputChange\n      }) : null, phone_number ? _react2.default.createElement(_AmplifyUI.RadioRow, {\n        placeholder: _core.I18n.get('Phone Number'),\n        theme: theme,\n        key: 'phone_number',\n        name: 'contact',\n        value: 'phone_number',\n        onChange: this.handleInputChange\n      }) : null, _react2.default.createElement(_AmplifyUI.ButtonRow, {\n        theme: theme,\n        onClick: this.verify\n      }, _core.I18n.get('Verify')));\n    }\n  }, {\n    key: 'submitView',\n    value: function submitView() {\n      var theme = this.props.theme || _AmplifyTheme2.default;\n      return _react2.default.createElement('div', null, _react2.default.createElement(_AmplifyUI.InputRow, {\n        placeholder: _core.I18n.get('Code'),\n        theme: theme,\n        key: 'code',\n        name: 'code',\n        autoComplete: 'off',\n        onChange: this.handleInputChange\n      }), _react2.default.createElement(_AmplifyUI.ButtonRow, {\n        theme: theme,\n        onClick: this.submit\n      }, _core.I18n.get('Submit')));\n    }\n  }, {\n    key: 'showComponent',\n    value: function showComponent(theme) {\n      var _this4 = this;\n\n      var _props = this.props,\n          authData = _props.authData,\n          hide = _props.hide;\n\n      if (hide && hide.includes(VerifyContact)) {\n        return null;\n      }\n\n      return _react2.default.createElement(_AmplifyUI.FormSection, {\n        theme: theme\n      }, _react2.default.createElement(_AmplifyUI.SectionHeader, {\n        theme: theme\n      }, _core.I18n.get('Verify Contact')), _react2.default.createElement(_AmplifyUI.SectionBody, {\n        theme: theme\n      }, _react2.default.createElement(_AmplifyUI.MessageRow, {\n        theme: theme\n      }, _core.I18n.get('Account recovery requires verified contact information')), this.state.verifyAttr ? this.submitView() : this.verifyView()), _react2.default.createElement(_AmplifyUI.SectionFooter, {\n        theme: theme\n      }, _react2.default.createElement(_AmplifyUI.Link, {\n        theme: theme,\n        onClick: function onClick() {\n          return _this4.changeState('signedIn', authData);\n        }\n      }, _core.I18n.get('Skip'))));\n    }\n  }]);\n  return VerifyContact;\n}(_AuthPiece3.default);\n\nexports.default = VerifyContact;","map":{"version":3,"sources":["/home/ec2-user/environment/amazon-cognito-identity-management-workshop/website/node_modules/aws-amplify-react/dist/Auth/VerifyContact.js"],"names":["Object","defineProperty","exports","value","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_core","_auth","_auth2","_AuthPiece2","_AuthPiece3","_AmplifyTheme","_AmplifyTheme2","_AmplifyUI","obj","__esModule","default","logger","ConsoleLogger","VerifyContact","_AuthPiece","props","_this","__proto__","getPrototypeOf","call","_validAuthStates","verify","bind","submit","state","verifyAttr","key","_this2","_inputs","inputs","contact","checkedValue","error","verifyCurrentUserAttribute","Error","then","data","debug","setState","catch","err","_this3","attr","code","verifyCurrentUserAttributeSubmit","changeState","authData","verifyView","user","unverified","email","phone_number","theme","createElement","RadioRow","placeholder","I18n","get","name","onChange","handleInputChange","ButtonRow","onClick","submitView","InputRow","autoComplete","showComponent","_this4","_props","hide","includes","FormSection","SectionHeader","SectionBody","MessageRow","SectionFooter","Link"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _auth = require('@aws-amplify/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _AuthPiece2 = require('./AuthPiece');\n\nvar _AuthPiece3 = _interopRequireDefault(_AuthPiece2);\n\nvar _AmplifyTheme = require('../AmplifyTheme');\n\nvar _AmplifyTheme2 = _interopRequireDefault(_AmplifyTheme);\n\nvar _AmplifyUI = require('../AmplifyUI');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nvar logger = new _core.ConsoleLogger('VerifyContact');\n\nvar VerifyContact = function (_AuthPiece) {\n    (0, _inherits3.default)(VerifyContact, _AuthPiece);\n\n    function VerifyContact(props) {\n        (0, _classCallCheck3.default)(this, VerifyContact);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (VerifyContact.__proto__ || Object.getPrototypeOf(VerifyContact)).call(this, props));\n\n        _this._validAuthStates = ['verifyContact'];\n        _this.verify = _this.verify.bind(_this);\n        _this.submit = _this.submit.bind(_this);\n\n        _this.state = { verifyAttr: null };\n        return _this;\n    }\n\n    (0, _createClass3.default)(VerifyContact, [{\n        key: 'verify',\n        value: function verify() {\n            var _this2 = this;\n\n            var _inputs = this.inputs,\n                contact = _inputs.contact,\n                checkedValue = _inputs.checkedValue;\n\n            if (!contact) {\n                this.error('Neither Email nor Phone Number selected');\n                return;\n            }\n\n            if (!_auth2.default || typeof _auth2.default.verifyCurrentUserAttribute !== 'function') {\n                throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n            }\n\n            _auth2.default.verifyCurrentUserAttribute(checkedValue).then(function (data) {\n                logger.debug(data);\n                _this2.setState({ verifyAttr: checkedValue });\n            }).catch(function (err) {\n                return _this2.error(err);\n            });\n        }\n    }, {\n        key: 'submit',\n        value: function submit() {\n            var _this3 = this;\n\n            var attr = this.state.verifyAttr;\n            var code = this.inputs.code;\n\n            if (!_auth2.default || typeof _auth2.default.verifyCurrentUserAttributeSubmit !== 'function') {\n                throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n            }\n            _auth2.default.verifyCurrentUserAttributeSubmit(attr, code).then(function (data) {\n                logger.debug(data);\n                _this3.changeState('signedIn', _this3.props.authData);\n                _this3.setState({ verifyAttr: null });\n            }).catch(function (err) {\n                return _this3.error(err);\n            });\n        }\n    }, {\n        key: 'verifyView',\n        value: function verifyView() {\n            var user = this.props.authData;\n            if (!user) {\n                logger.debug('no user for verify');\n                return null;\n            }\n            var unverified = user.unverified;\n\n            if (!unverified) {\n                logger.debug('no unverified on user');\n                return null;\n            }\n            var email = unverified.email,\n                phone_number = unverified.phone_number;\n\n            var theme = this.props.theme || _AmplifyTheme2.default;\n            return _react2.default.createElement(\n                'div',\n                null,\n                email ? _react2.default.createElement(_AmplifyUI.RadioRow, {\n                    placeholder: _core.I18n.get('Email'),\n                    theme: theme,\n                    key: 'email',\n                    name: 'contact',\n                    value: 'email',\n                    onChange: this.handleInputChange\n                }) : null,\n                phone_number ? _react2.default.createElement(_AmplifyUI.RadioRow, {\n                    placeholder: _core.I18n.get('Phone Number'),\n                    theme: theme,\n                    key: 'phone_number',\n                    name: 'contact',\n                    value: 'phone_number',\n                    onChange: this.handleInputChange\n                }) : null,\n                _react2.default.createElement(\n                    _AmplifyUI.ButtonRow,\n                    { theme: theme, onClick: this.verify },\n                    _core.I18n.get('Verify')\n                )\n            );\n        }\n    }, {\n        key: 'submitView',\n        value: function submitView() {\n            var theme = this.props.theme || _AmplifyTheme2.default;\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(_AmplifyUI.InputRow, {\n                    placeholder: _core.I18n.get('Code'),\n                    theme: theme,\n                    key: 'code',\n                    name: 'code',\n                    autoComplete: 'off',\n                    onChange: this.handleInputChange\n                }),\n                _react2.default.createElement(\n                    _AmplifyUI.ButtonRow,\n                    { theme: theme, onClick: this.submit },\n                    _core.I18n.get('Submit')\n                )\n            );\n        }\n    }, {\n        key: 'showComponent',\n        value: function showComponent(theme) {\n            var _this4 = this;\n\n            var _props = this.props,\n                authData = _props.authData,\n                hide = _props.hide;\n\n            if (hide && hide.includes(VerifyContact)) {\n                return null;\n            }\n\n            return _react2.default.createElement(\n                _AmplifyUI.FormSection,\n                { theme: theme },\n                _react2.default.createElement(\n                    _AmplifyUI.SectionHeader,\n                    { theme: theme },\n                    _core.I18n.get('Verify Contact')\n                ),\n                _react2.default.createElement(\n                    _AmplifyUI.SectionBody,\n                    { theme: theme },\n                    _react2.default.createElement(\n                        _AmplifyUI.MessageRow,\n                        { theme: theme },\n                        _core.I18n.get('Account recovery requires verified contact information')\n                    ),\n                    this.state.verifyAttr ? this.submitView() : this.verifyView()\n                ),\n                _react2.default.createElement(\n                    _AmplifyUI.SectionFooter,\n                    { theme: theme },\n                    _react2.default.createElement(\n                        _AmplifyUI.Link,\n                        { theme: theme, onClick: function onClick() {\n                                return _this4.changeState('signedIn', authData);\n                            } },\n                        _core.I18n.get('Skip')\n                    )\n                )\n            );\n        }\n    }]);\n    return VerifyContact;\n}(_AuthPiece3.default);\n\nexports.default = VerifyContact;"]},"metadata":{},"sourceType":"script"}