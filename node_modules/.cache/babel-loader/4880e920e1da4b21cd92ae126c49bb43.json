{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _auth = require('@aws-amplify/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _AuthPiece2 = require('./AuthPiece');\n\nvar _AuthPiece3 = _interopRequireDefault(_AuthPiece2);\n\nvar _AmplifyTheme = require('../AmplifyTheme');\n\nvar _AmplifyTheme2 = _interopRequireDefault(_AmplifyTheme);\n\nvar _AmplifyUI = require('../AmplifyUI');\n\nvar _qrcode = require('qrcode.react');\n\nvar _qrcode2 = _interopRequireDefault(_qrcode);\n\nvar _Widget = require('../Widget');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nvar logger = new _core.ConsoleLogger('TOTPSetup');\n\nvar TOTPSetup = function (_AuthPiece) {\n  (0, _inherits3.default)(TOTPSetup, _AuthPiece);\n\n  function TOTPSetup(props) {\n    (0, _classCallCheck3.default)(this, TOTPSetup);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TOTPSetup.__proto__ || Object.getPrototypeOf(TOTPSetup)).call(this, props));\n\n    _this._validAuthStates = ['TOTPSetup'];\n    _this.onTOTPEvent = _this.onTOTPEvent.bind(_this);\n    _this.checkContact = _this.checkContact.bind(_this);\n    return _this;\n  }\n\n  (0, _createClass3.default)(TOTPSetup, [{\n    key: 'checkContact',\n    value: function checkContact(user) {\n      var _this2 = this;\n\n      if (!_auth2.default || typeof _auth2.default.verifiedContact !== 'function') {\n        throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n      }\n\n      _auth2.default.verifiedContact(user).then(function (data) {\n        if (!_core.JS.isEmpty(data.verified)) {\n          _this2.changeState('signedIn', user);\n        } else {\n          user = Object.assign(user, data);\n\n          _this2.changeState('verifyContact', user);\n        }\n      });\n    }\n  }, {\n    key: 'onTOTPEvent',\n    value: function onTOTPEvent(event, data, user) {\n      logger.debug('on totp event', event, data); //const user = this.props.authData;\n\n      if (event === 'Setup TOTP') {\n        if (data === 'SUCCESS') {\n          this.checkContact(user);\n        }\n      }\n    }\n  }, {\n    key: 'showComponent',\n    value: function showComponent(theme) {\n      var hide = this.props.hide;\n\n      if (hide && hide.includes(TOTPSetup)) {\n        return null;\n      }\n\n      return _react2.default.createElement(_Widget.TOTPSetupComp, (0, _extends3.default)({}, this.props, {\n        onTOTPEvent: this.onTOTPEvent\n      }));\n    }\n  }]);\n  return TOTPSetup;\n}(_AuthPiece3.default);\n\nexports.default = TOTPSetup;","map":{"version":3,"sources":["/home/ec2-user/environment/amazon-cognito-identity-management-workshop/website/node_modules/aws-amplify-react/dist/Auth/TOTPSetup.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_core","_auth","_auth2","_AuthPiece2","_AuthPiece3","_AmplifyTheme","_AmplifyTheme2","_AmplifyUI","_qrcode","_qrcode2","_Widget","obj","__esModule","default","logger","ConsoleLogger","TOTPSetup","_AuthPiece","props","_this","__proto__","getPrototypeOf","call","_validAuthStates","onTOTPEvent","bind","checkContact","key","user","_this2","verifiedContact","Error","then","data","JS","isEmpty","verified","changeState","assign","event","debug","showComponent","theme","hide","includes","createElement","TOTPSetupComp"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _auth = require('@aws-amplify/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _AuthPiece2 = require('./AuthPiece');\n\nvar _AuthPiece3 = _interopRequireDefault(_AuthPiece2);\n\nvar _AmplifyTheme = require('../AmplifyTheme');\n\nvar _AmplifyTheme2 = _interopRequireDefault(_AmplifyTheme);\n\nvar _AmplifyUI = require('../AmplifyUI');\n\nvar _qrcode = require('qrcode.react');\n\nvar _qrcode2 = _interopRequireDefault(_qrcode);\n\nvar _Widget = require('../Widget');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\nvar logger = new _core.ConsoleLogger('TOTPSetup');\n\nvar TOTPSetup = function (_AuthPiece) {\n    (0, _inherits3.default)(TOTPSetup, _AuthPiece);\n\n    function TOTPSetup(props) {\n        (0, _classCallCheck3.default)(this, TOTPSetup);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TOTPSetup.__proto__ || Object.getPrototypeOf(TOTPSetup)).call(this, props));\n\n        _this._validAuthStates = ['TOTPSetup'];\n        _this.onTOTPEvent = _this.onTOTPEvent.bind(_this);\n        _this.checkContact = _this.checkContact.bind(_this);\n        return _this;\n    }\n\n    (0, _createClass3.default)(TOTPSetup, [{\n        key: 'checkContact',\n        value: function checkContact(user) {\n            var _this2 = this;\n\n            if (!_auth2.default || typeof _auth2.default.verifiedContact !== 'function') {\n                throw new Error('No Auth module found, please ensure @aws-amplify/auth is imported');\n            }\n            _auth2.default.verifiedContact(user).then(function (data) {\n                if (!_core.JS.isEmpty(data.verified)) {\n                    _this2.changeState('signedIn', user);\n                } else {\n                    user = Object.assign(user, data);\n                    _this2.changeState('verifyContact', user);\n                }\n            });\n        }\n    }, {\n        key: 'onTOTPEvent',\n        value: function onTOTPEvent(event, data, user) {\n            logger.debug('on totp event', event, data);\n            //const user = this.props.authData;\n            if (event === 'Setup TOTP') {\n                if (data === 'SUCCESS') {\n                    this.checkContact(user);\n                }\n            }\n        }\n    }, {\n        key: 'showComponent',\n        value: function showComponent(theme) {\n            var hide = this.props.hide;\n\n            if (hide && hide.includes(TOTPSetup)) {\n                return null;\n            }\n\n            return _react2.default.createElement(_Widget.TOTPSetupComp, (0, _extends3.default)({}, this.props, { onTOTPEvent: this.onTOTPEvent }));\n        }\n    }]);\n    return TOTPSetup;\n}(_AuthPiece3.default);\n\nexports.default = TOTPSetup;"]},"metadata":{},"sourceType":"script"}